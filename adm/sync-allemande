#!/bin/bash -eu
set -o pipefail

cd "$ALLEMANDE_HOME"

git checkout main

git pull --commit --no-edit sam@ucm.dev:allemande
git pull --commit --no-edit sam@pi.ucm.dev:allemande
git push sam@ucm.dev:allemande main
git push sam@pi.ucm.dev:allemande main

git-add-commit

git push $ALLEMANDE_GITHUB ; git pull $ALLEMANDE_GITHUB

git checkout allemande
git pull $ALLEMANDE_GITHUB allemande
git merge --no-edit main
git push $ALLEMANDE_GITHUB allemande
git pull $ALLEMANDE_GITHUB allemande

git checkout barbarella
git pull $BARBARELLA_GITHUB barbarella
git merge --no-edit main
git push $BARBARELLA_GITHUB barbarella
git pull $BARBARELLA_GITHUB barbarella

git checkout main
