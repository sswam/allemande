# Devlog: Week of 2025-07-21 to 2025-07-27

This week brought a wide range of updates to Ally Chat, including significant changes to AI agents, visual generation, administration tools, and overall user experience. The focus remained on providing more flexibility, control, and insight into the platform.

## Key Highlights

*   **Agent Overhaul:** The agent system was significantly reworked, with new base configurations, model updates, and new specialized agents. Several existing agent prompts were refined for better behavior and clarity.
*   **Visual Generation:** New LoRA options were added and existing macro prompts were improved, enhancing image generation flexibility.
*   **Administration:** New tools were introduced to audit and manage inactive users, providing better control over the platform.
*   **User Experience:** A number of changes were made to improve usability, including the ability to delete files by saving them empty, improved markdown link handling, and more robust dead link checking.

## Detailed Breakdown

### AI Agent Improvements

A major focus this week was on refactoring and enhancing the AI agent system:

*   **Base Configurations:** To streamline agent configurations, base configurations such as `SmallAI`, `MediumAI`, and `StrongAI` were introduced. These configurations centralize model settings and provide a consistent foundation for agent behavior.
*   **Model Updates:** Many agents were migrated to use these new base configurations, with a shift from Google models to DeepSeek and Llama models for some. The default models for `MediumAI` and `StrongAI` were switched to Gemini. The Gema agent was switched to deepseek-chat.
*   **New Agents:** The Venice Uncensored model was added, along with the new Veni agent. Aetheria and NaughtyAI were added to the character roster.
*    **Agent Prompt Updates:** Various agent prompts, including those for Chaz, Nicc, and Novi, were refined to improve behavior and clarity. The Nalani agent's prompt was updated to make it clear that the desired behavior is to refer to Xilu for images. Instructions were added to both Illu and Pixi to avoid mentioning hidden underwear.
*   **Emoji Restrictions:** Emoji usage was limited in the base AI agent responses for both MediumAI and StrongAI.
*   **Agent Renaming:** The agents Jax and Kris were renamed to Jaxx and Kriss, respectively. Also, the Ani agent for Grok 4 was renamed to Anni.
*   **Agent Removal:** The human Sam agent file and various art model agents were removed from the repository.
*    **Agent Welcome Messages**: The welcome messages for Gemav, Illuv, and Gema were disabled.
*   **Bish enhancements**: The Bish agent was improved to prevent it from contributing its own thoughts or answering questions, ensuring it only translates.

### Visual Generation Enhancements

The visual generation capabilities also received a number of updates:

*   **New LoRA Options:** Shane Glines Pony LoRAs and styles were added. Additionally, Inside Out and andrewcockroach LoRA styles were added.
*   **NSFW Macros:** New NSFW macros were introduced for generating specific types of explicit content.
*   **Ghibli Macro:** A macro was added for generating Ghibli-style images.
*   **Prompt Refinements:** The Shane Glines LoRA prompt was added in cartoon style to shane.txt. Underscores were removed from visual prompt entries in the Veni agent.
*   **Step count restriction:** The maximum number of steps for image generation jobs was reduced from 150 to 30 to restrict job step count.

### Administration Tooling

New administration tools were added to improve management of the platform:

*   **User Auditing:** Tooling was added to audit and manage inactive users, helping to identify and potentially remove accounts that are not actively engaged. This includes the `webchat_user_active.py` script. Scripts were also added to resolve user/agent conflicts.
*   **User management**:  New scripts were added to fix common user account issues.
*   **Directory Cleanup:** A script was added to remove empty directories from rooms, helping to keep the file system tidy.

### User Experience Improvements

Several changes were made to improve the user experience:

*   **File Deletion:** Users can now delete files by saving them empty, providing a more intuitive way to manage content.
*   **Markdown Link Handling:** Markdown link handling was improved, resolving links to local .yml, .m, .txt, and .md files. Spaces in link URLs are now replaced with '+' characters to create valid links.
*   **Username Display:** Improved message display within room bases.
*   **Symlink Utility:** Added a new utility script, `symlink-title-case.sh`, for creating title-cased symlinks.
*    **Directory Sorting**: Added the ability to sort directory listings by modification time, making it easier to find recently updated files. The directory tab order was set to match the visual sort order.
*    **Image Generation**: Image generation was re-enabled in private rooms for free users.
*  **Access controls**: Users with write permission in a room are now granted moderation access.

### Infrastructure and Backend

Underlying infrastructure and backend processes were improved:

*   **Fallback Room File Serving**: Nginx now has a fallback location (`rooms.extra`) for serving room files if they are not found in the primary location.
*   **Union Mount**: Scripts for setting up a union mount and cleaning up Nginx temporary files were introduced.
*   **Cron job**: A cron job was added to remove stale Nginx client temporary files.

This week demonstrated a commitment to enhancing Ally Chat across multiple dimensions. The improvements to AI agents, visual generation, administration, and user experience collectively contribute to a more powerful, flexible, and user-friendly platform. The addition of new administrative tools and the focus on under-the-hood improvements also set the stage for continued growth and stability.
