# Devlog: Week of 2025-07-28 to 2025-08-03

This week saw a flurry of activity on Ally Chat, with a focus on refining AI agents, improving the user experience, and adding some cool new visual effects. We've also been working on some under-the-hood improvements to keep things running smoothly and prepare for future growth.

## Key Highlights

*   **Agent Refinement:** A significant amount of work went into tweaking and tuning our AI agents. This included adding new agents, adjusting existing configurations, and clarifying prompts to improve their behavior and reduce costs.
*   **New Visual Effects:** We've added some fun new canvas-based effects to spice up the chat rooms, including a Matrix-style falling character animation and a rain effect.
*   **User Experience Enhancements:** Several smaller but important improvements were made to enhance the user experience, such as generating unique colors for agent names in webchat.
*   **Infrastructure Improvements:** We continued to work on the underlying infrastructure with things like daily resets for image generation and a new script for joining files by columns.

## Detailed Breakdown

### AI Agent Improvements

This week was all about making our AI agents smarter, more efficient, and easier to manage:

*   **Agent Management:** We introduced a new "enabled" flag to agent configuration files. Setting `enabled: false` will now prevent an agent from loading, giving us a simple way to disable agents without deleting them. Also, the agent Jax was renamed to Jaxx, Kris was renamed to Kriss, and Ani was renamed to Anni. Cassandra Steele was added as the agent Cassie.
*   **Agent Efficiency:** To reduce costs and improve responsiveness, we reduced the context length for several AI agents and switched to the `gemini-2.0-flash` model where appropriate. This includes agents like Aidi, Bish, Chas, Frida, Greta, Illuv, Jessi, Gemini Chan.
*   **Agent Tweaks:** The Azazel character was updated to reinforce its identity. Also, Frida was reconfigured to use `MediumAI` as her base.
*   **Prompt Clarity:** We clarified Gema's system prompt to be more directive about using Regional Simple for multiple characters in image generation prompts. Loni's agent description was also updated to mention regional prompting and clarify that Yenta can handle vague user character search requests.
*   **Agent welcome**: The welcome messages for Gemav, Illuv, and Gema were disabled.

### Visual Enhancements

We're always looking for ways to make Ally Chat more visually appealing:

*   **New Visual Effects:** We added "rain" and "matrix" canvas effects that can be used in chat rooms, bringing some old-school flair. These effects are disabled if the user has "prefers-reduced-motion" enabled.
*   **New LoRAs:** Illu got some new LoRAs to play with, including the MS Paint Portrait LoRA, Inside Out styles, andrewcockroach styles, and Ghibli styles.

### User Experience Improvements

Small details can make a big difference:

*   **Unique Agent Colors:** We added a system to automatically generate unique colors for agent names in the webchat interface based on their summary text. This should make it easier to distinguish between agents in conversations.  This involved creating a new `agent_colours.css` file, as well as updating the build process to generate the CSS file from agent summaries using a new python script `agent_colours_tsv_to_css.py` and shell script `update_colours.sh`.
*   **Simplified User Creation:** Simplified the access config for new user creation, and added a "game" agent category. Also, a crash when creating a private agent was fixed.
*   **Image Generation in Private Rooms**: Fixed an issue where image generation was not enabled in private rooms for free users by default. It is now enabled, but users will be asked to use public rooms as much as possible.

### Infrastructure and Tooling

We're constantly working to improve the underlying systems that power Ally Chat:

*   **Daily Image Queue Resets:** We implemented a daily reset of user job counts for image generation to ensure fair usage of resources. We also fixed an issue where past-dated jobs in the image queue would delay new jobs, rescheduling them to the current time while preserving their order.
*   **New Script: joine.sh:** Added a new script `joine.sh` to join two files by columns, a wrapper around the `join` command.
*   **Command Line Interface**: Added the `irun.sh` script for running commands with TTY input.
*   **Message Logging**: Log new message posts, to aid debugging.

This week was a mix of big and small improvements, all aimed at making Ally Chat a more enjoyable and powerful platform. From refining our AI agents to adding fun new visual effects and streamlining user creation, we're constantly striving to create a unique and engaging experience for our users.
