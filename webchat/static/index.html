<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Allemande AI</title>
<meta name="mobile-web-app-capable" content="yes" />
<meta name="viewport" content="minimal-ui, width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no viewport-fit=cover">
<link rel="stylesheet" href="allychat.css">
<link rel="stylesheet" href="chat.css">
<link rel="icon" type="image/png" href="icon.png">
<link rel="manifest" href="manifest.json" crossorigin="use-credentials">
<link id="theme" rel="stylesheet" type="text/css" media="screen" onload="theme_loaded()">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:ital,wght@0,100..700;1,100..700&display=swap" rel="stylesheet">
</head>
<body id="app">
<form id="form" class="fill" onsubmit="return false;">
<input type="hidden" id="op" name="op" value="post">
<div id="main" class="col pad fill">
	<div class="row" id="top">
		<div class="top_left_controls row" id="top_left_main">
			<button id="privacy"></button>
			<button id="nav" title="navigation">nav</button>
			<button id="room_ops" title="room operations">room</button>
		</div>
		<div class="top_left_controls row hidden" id="top_left_nav">
			<button id="nav_cancel">back</button>
			<button id="nav_up" title="go up to parent folder: alt+u">up</button>
			<button id="nav_allychat" title="Ally Chat">allychat</button>
			<button id="nav_porch" title="porch">your public porch</button>
			<button id="nav_home" title="home">your private home</button>
			<button id="nav_first" title="first page: ctrl+'">first</button>
			<button id="nav_prev" title="previous page: ctrl+,">prev</button>
			<button id="nav_next" title="next page: ctrl+.">next</button>
			<button id="nav_last" title="last page: ctrl+/">last</button>
		</div>
		<div class="top_left_controls row hidden" id="top_left_room_ops">
			<button id="room_ops_cancel">back</button>
			<button id="room_ops_copy" title="copy all or part of the room">copy</button>
			<button id="room_ops_move" title="rename or move: alt+m" class="admin">move</button>
		</div>
		<input id="room" name="room" class="flex grow">
		<div class="top_controls row" id="top_main">
			<button id="debug" title="toggle debug" class="hidden small">?</button>
			<button id="scroll" title="scrolling">scroll</button>
			<button class="hidden" id="notify">notify</button>
			<a class="button" href="" id="user" title="cycle main rooms">?</a>
			<button id="logout" title="log out">exit</button>
		</div>
		<div class="top_controls row hidden" id="top_scroll">
			<button id="scroll_home" title="start of room: home">top</button>
			<button id="scroll_pageup" title="page up">pageup</button>
			<button id="scroll_pagedown" title="page down">pagedown</button>
			<button id="scroll_end" title="end of room: end">bot</button>
			<button id="scroll_cancel">back</button>
		</div>
	</div>

	<div id="messages" class="view messages grow">
		<iframe id="messages_iframe" class="fill" src="about:blank" scrolling="no" allowFullScreen></iframe>
		<div id="messages_overlay"  class="fill"></div>
	</div>
	<textarea id="view_edit" class="view editor grow hidden"></textarea>

	<div class="row" id="resizer">
	</div>

	<div class="row" id="inputrow">
		<textarea id="content" name="content" class="content_input grow"></textarea>
		<div class="controls col_wrap" id="input_main">
			<button id="send">send</button>
			<button id="add" title="add a file or recording">add</button>
			<button id="view" title="view settings">view</button>
			<button id="audio" title="audio settings">audio</button>
			<button id="opt" title="room options">opt</button>
			<button id="mod" title="owner tools" class="admin">mod</button>
		</div>
		<div class="controls col_wrap hidden" id="input_mod">
			<button id="mod_undo" title="remove the last message: alt+z">undo</button>
			<button id="mod_retry" title="retry the last message: alt+r">retry</button>
			<button id="mod_edit" title="edit the room: alt+e">edit</button>
			<button id="mod_auto" title="auto play">auto</button>
			<!--<button id="rotate" disabled>rotate</button>-->
			<button id="mod_archive" title="archive this room: alt+a">archive</button>
			<button id="mod_clear" title="clear this room: alt+x">clear</button>
			<button id="mod_clean" title="clean up this room">clean</button>
			<button id="mod_cancel">back</button>
		</div>
		<div class="controls col_wrap hidden" id="input_add">
			<input id="files" name="files" type="file" class="inputfile hide" tabindex="-1" multiple/>
			<button id="add_file" title="upload files">file</button>
			<button id="add_record_audio" title="record audio">audio</button>
			<button id="add_record_video" title="record video">video</button>
			<button id="add_cancel">back</button>
		</div>
		<div class="controls col_wrap hidden" id="input_record">
			<button id="rec_time" title="pause recording"></button>
			<video id="rec_videoPreview" autoplay muted></video>
			<button id="rec_stop" title="stop recording">stop</button>
			<button id="rec_save" title="upload the recording">save</button>
			<button id="rec_cancel">cancel</button>
		</div>
		<div class="controls col_wrap hidden" id="input_record_preview">
			<video id="rec_preview_videoPreview" autoplay controls></video>
			<audio id="rec_preview_audioPreview" autoplay controls></audio>
			<button id="rec_preview_save" title="upload the recording">save</button>
			<button id="rec_preview_cancel">cancel</button>
		</div>
		<div class="controls col_wrap hidden" id="input_edit">
			<button id="edit_save" title="save changes">save</button>
			<button id="edit_tab" title="insert tab">tab</button>
			<button id="edit_reset" title="revert changes">reset</button>
			<button id="edit_clear" title="clear the file">clear</button>
			<button id="edit_close">close</button>
		</div>
		<div class="controls col_wrap hidden" id="input_view">
			<button id="view_theme" title="change the theme">theme</button>
			<button id="view_ids" title="view message IDs">IDs</button>
			<button id="view_images" title="toggle showing images: alt+i" class="active">images</button>
			<button id="view_alt" title="toggle showing alt captions: alt+a">alt</button>
			<button id="view_image_size" title="change image size">image<br>size</button>
			<button id="view_source" title="view source" class="active">source</button>
			<button id="view_highlight" title="highlight code" class="active">color</button>
			<button id="view_details" title="view thoughts and details">details</button>
			<button id="view_canvas" title="view JavaScript canvas" >canvas</button>
			<button id="view_clean" title="clean reading view">clean</button>
			<button id="view_columns" title="view chat in columns (scroll to the right)">columns</button>
			<button id="view_compact" title="compact view">compact</button>
			<input id="view_items" placeholder="items" title="number of search results to show">
			<button id="view_cancel">back</button>
		</div>
		<div class="controls col_wrap hidden" id="input_audio">
			<button id="audio_stt" title="speech to text">stt</button>
			<button id="audio_tts" title="text to speech">tts</button>
			<button id="audio_vad" title="voice activity detection">vad</button>
			<button id="audio_auto" title="automatic voice chat">auto</button>
			<input id="audio_voice" placeholder="voice" title="your text to speech voice">
			<button id="audio_cancel">back</button>
		</div>
		<div class="controls col_wrap hidden" id="input_opt">
			<input id="opt_context" placeholder="context" title="number of recent messages AI can see">
			<input id="opt_lines" placeholder="lines" title="limit number of lines of AI output (local models only)">
			<input id="opt_images" placeholder="images" title="number of recent images AI can see">
			<input id="opt_mission" placeholder="mission" title="mission file to use, - for none">
			<button id="opt_cancel">back</button>
		</div>
	</div>
</div>
</form>
<script src="util.js"></script>
<script src="debug.js"></script>
<script src="config.js"></script>
<script src="https://allemande.ai/auth.js"></script>
<script src="notify.js"></script>
<script src="record.js"></script>
<script src="resizer.js"></script>
<script src="chat.js"></script>
<script>chat_main();</script>
</body>
</html>
