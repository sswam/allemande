<!DOCTYPE html>
<head>
<meta name="referrer" content="no-referrer">
<script>var user = {{ user|tojson|safe }}, theme = {{ theme|tojson|safe }};</script>
<link rel="stylesheet" href="{{ chat_base_url }}/allychat.css">
<script src="{{ chat_base_url }}/util.js"></script>
<script src="{{ chat_base_url }}/debug.js"></script>
<script src="{{ chat_base_url }}/resizer.js"></script>
<script src="{{ chat_base_url }}/process_messages.js"></script>
<script src="{{ chat_base_url }}/room.js"></script>
<script src="{{ chat_base_url }}/d3.min.js"></script>
<script src="{{ chat_base_url }}/wasm.min.js"></script>
<script src="{{ chat_base_url }}/d3-graphviz.min.js"></script>
<link rel="stylesheet" href="{{ chat_base_url }}/room.css">
<link id="theme" rel="stylesheet" type="text/css" href="{{ chat_base_url }}/themes/{{ theme|safe }}.css">
<link id="user_styles" rel="stylesheet" type="text/css" href="{{ chat_base_url }}/users/{{ user }}/styles.css">
<script id="user_script" src="{{ chat_base_url }}/users/{{ user }}/script.js"></script>
<base target="_top">
</head>
<body id="messages">
<div class="overlay maxpect"></div>
<div class="canvas">
<canvas id="canvas"></canvas>
<script>
// set canvas size to screen size (not window size)
canvas = $id('canvas');
canvas.width = window.screen.width * window.devicePixelRatio;
canvas.height = window.screen.height * window.devicePixelRatio;
ctx = canvas.getContext('2d');
ctx.transform(1, 0, 0, -1, 0, canvas.height);
ctx.scale(window.devicePixelRatio, window.devicePixelRatio);
ctx.strokeStyle = 'grey';
ctx.fillStyle = 'grey';
// scroll div.canvas to bottom
$('.canvas').scrollTop = $('.canvas').scrollHeight;
</script>
</div>
<div class="resizer">
</div>
<div class="messages_wrap">
<div class="messages">
